# IntelliHub åç»­å¼€å‘ä¸ä¼˜åŒ–è®¡åˆ’

> ç›®æ ‡ï¼šåœ¨ä¿æŒå½“å‰"ç½‘å…³ç»Ÿä¸€æ²»ç† + å¤šç§Ÿæˆ· + API å…¨ç”Ÿå‘½å‘¨æœŸ + ç»Ÿè®¡å‘Šè­¦"çš„æ ¸å¿ƒé—­ç¯ç¨³å®šçš„å‰æä¸‹ï¼Œè¡¥é½å¯æ‰©å±•èƒ½åŠ›ï¼ˆèšåˆæœç´¢ã€äº‹ä»¶ä¸­å¿ƒã€AIGC æ™ºèƒ½å¢å¼ºï¼‰ï¼Œå¹¶é€šè¿‡ Starter åŒ–æ²‰æ·€åŸºç¡€è®¾æ–½èƒ½åŠ›ï¼Œè®©æ–°æ¨¡å—çš„å¼€å‘æˆæœ¬å¯æ§ã€‚

---

## 1. å¹³å°å¾®æœåŠ¡æ¶æ„æ€»è§ˆ

å½“å‰ `intellihub-parent` åŒ…å«ä»¥ä¸‹å¾®æœåŠ¡ï¼š

| å¾®æœåŠ¡ | èŒè´£ | æ ¸å¿ƒæ•°æ® |
|--------|------|----------|
| `intelli-gateway-service` | API ç½‘å…³ï¼Œç»Ÿä¸€å…¥å£ã€è·¯ç”±ã€é‰´æƒã€é™æµ | è·¯ç”±è§„åˆ™ã€è®¿é—®æ—¥å¿— |
| `intelli-api-platform-service` | API å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼ˆå®šä¹‰ã€å‘å¸ƒã€ä¸‹çº¿ã€ç‰ˆæœ¬ï¼‰ | API å…ƒä¿¡æ¯ã€å‚æ•°å®šä¹‰ã€æ–‡æ¡£ |
| `intelli-app-center-service` | åº”ç”¨ä¸­å¿ƒï¼ˆAppKey ç®¡ç†ã€è®¢é˜…æˆæƒï¼‰ | åº”ç”¨ä¿¡æ¯ã€è®¢é˜…å…³ç³»ã€å¯†é’¥ |
| `intelli-auth-iam-service` | èº«ä»½è®¤è¯ä¸æƒé™ï¼ˆç”¨æˆ·ã€è§’è‰²ã€ç§Ÿæˆ·ï¼‰ | ç”¨æˆ·ã€è§’è‰²ã€æƒé™ã€ç§Ÿæˆ· |
| `intelli-governance-service` | API æ²»ç†ï¼ˆç»Ÿè®¡ã€å‘Šè­¦ã€ç†”æ–­ç­–ç•¥ï¼‰ | è°ƒç”¨ç»Ÿè®¡ã€å‘Šè­¦è§„åˆ™ã€å‘Šè­¦è®°å½• |
| `intelli-log-audit-service` | æ“ä½œå®¡è®¡ä¸æ—¥å¿—ç•™ç—• | å®¡è®¡æ—¥å¿— |
| `intelli-search-service` | èšåˆæœç´¢æœåŠ¡ï¼ˆES ç´¢å¼•ä¸æ£€ç´¢ï¼‰ | ES ç´¢å¼•ï¼ˆAPI/æ–‡æ¡£/å®¡è®¡ï¼‰ |
| `intelli-event-service` | äº‹ä»¶ä¸­å¿ƒï¼ˆé¢†åŸŸäº‹ä»¶å‘å¸ƒä¸è®¢é˜…ï¼‰ | äº‹ä»¶æµã€äº‹ä»¶æ—¥å¿— |
| `intelli-aigc-service` | AIGC æ™ºèƒ½å¢å¼ºï¼ˆAI åˆ†æä¸ç”Ÿæˆï¼‰ | Prompt æ¨¡æ¿ã€è°ƒç”¨æ—¥å¿— |

---

## 2. èšåˆæœç´¢èƒ½åŠ›è®¾è®¡ï¼ˆintelli-search-serviceï¼‰

### 2.1 è®¾è®¡ç›®æ ‡

- æä¾›å…¨å¹³å°ç»Ÿä¸€æœç´¢å…¥å£ï¼Œç”¨æˆ·å¯ä¸€æ¬¡æŸ¥è¯¢è·¨å¤šä¸ªå¾®æœåŠ¡çš„æ•°æ®ã€‚
- æ”¯æŒå…³é”®è¯æœç´¢ã€é«˜äº®ã€è”æƒ³ã€è¿‡æ»¤ã€åˆ†é¡µã€‚
- æ•°æ®æ¥æºå¤šæ ·åŒ–ï¼Œé€šè¿‡äº‹ä»¶é©±åŠ¨å®ç°å‡†å®æ—¶åŒæ­¥.

### 2.2 æ¶‰åŠçš„å¾®æœåŠ¡ä¸æ•°æ®æ¥æº

èšåˆæœç´¢éœ€ä»ä»¥ä¸‹å¾®æœåŠ¡è·å–æ•°æ®å¹¶å»ºç«‹ ES ç´¢å¼•ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      æ•°æ®æ¥æº                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ api-     â”‚    â”‚ app-     â”‚    â”‚governance â”‚    â”‚ auth-    â”‚ â”‚
â”‚  â”‚ platform â”‚    â”‚ center   â”‚    â”‚ service   â”‚    â”‚ iam      â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€ â”‚    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€ â”‚    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€ â”‚    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚  â”‚ â€¢ API åç§° â”‚    â”‚ â€¢ åº”ç”¨åç§° â”‚    â”‚ â€¢ å‘Šè­¦è§„åˆ™ â”‚    â”‚ â€¢ ç”¨æˆ·ä¿¡æ¯ â”‚ â”‚
â”‚  â”‚ â€¢ API è·¯å¾„ â”‚    â”‚ â€¢ AppKey   â”‚    â”‚ â€¢ å‘Šè­¦è®°å½• â”‚    â”‚ â€¢ è§’è‰²/æƒé™ â”‚ â”‚
â”‚  â”‚ â€¢ API æè¿° â”‚    â”‚ â€¢ è®¢é˜…å…³ç³» â”‚    â”‚ â€¢ ç»Ÿè®¡æ•°æ® â”‚    â”‚           â”‚ â”‚
â”‚  â”‚ â€¢ å‚æ•°/æ ‡ç­¾ â”‚    â”‚ â€¢ åº”ç”¨æè¿° â”‚    â”‚           â”‚    â”‚           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ log-     â”‚    â”‚ event-    â”‚    â”‚ aigc-    â”‚             â”‚
â”‚  â”‚ audit    â”‚    â”‚ service   â”‚    â”‚ service  â”‚             â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€ â”‚    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€ â”‚    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€ â”‚             â”‚
â”‚  â”‚ â€¢ å®¡è®¡æ—¥å¿— â”‚    â”‚ â€¢ äº‹ä»¶æµ  â”‚    â”‚ â€¢ Prompt æ¨¡æ¿ â”‚             â”‚
â”‚  â”‚           â”‚    â”‚ â€¢ äº‹ä»¶æ—¥å¿— â”‚    â”‚ â€¢ è°ƒç”¨æ—¥å¿—  â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 ES ç´¢å¼•è®¾è®¡

| ç´¢å¼•åç§° | æ•°æ®æ¥æº | æ ¸å¿ƒå­—æ®µ | ç”¨é€” |
|----------|----------|----------|------|
| `idx_api` | `api-platform-service` | id, name, path, method, description, tags, groupId, status, tenantId, updatedAt | API æœç´¢ |
| `idx_app` | `app-center-service` | id, appName, appKey, description, status, tenantId, updatedAt | åº”ç”¨æœç´¢ |
| `idx_audit` | `log-audit-service` | id, userId, action, resourceType, resourceId, ip, traceId, tenantId, createdAt | å®¡è®¡æ£€ç´¢ |
| `idx_alert` | `governance-service` | id, ruleName, apiId, alertLevel, triggerTime, tenantId | å‘Šè­¦æœç´¢ |
| `idx_user` | `auth-iam-service` | id, username, nickname, email, roles, tenantId | ç”¨æˆ·æœç´¢ |

### 2.4 èšåˆæœç´¢å®ç°æ–¹å¼

#### 2.4.1 æ•°æ®åŒæ­¥ç­–ç•¥

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      æ•°æ®åŒæ­¥é“¾è·¯                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  æ–¹å¼ä¸€ï¼šäº‹ä»¶é©±åŠ¨ï¼ˆæ¨èï¼Œå‡†å®æ—¶ï¼‰                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    Kafka     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    ES API      â”‚
â”‚  â”‚ ä¸šåŠ¡æœåŠ¡ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶  â”‚ search-serviceâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ ES â”‚
â”‚  â”‚ å‘å¸ƒäº‹ä»¶ â”‚   äº‹ä»¶Topic  â”‚  æ¶ˆè´¹ & ç´¢å¼•  â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                             â”‚
â”‚  æ–¹å¼äºŒï¼šå®šæ—¶åŒæ­¥ï¼ˆå…œåº•ï¼Œå…¨é‡/å¢é‡ï¼‰                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   Dubbo/HTTP  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    ES API     â”‚
â”‚  â”‚ ä¸šåŠ¡æœåŠ¡ â”‚ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ search-serviceâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ ESâ”‚
â”‚  â”‚ æŸ¥è¯¢æ¥å£ â”‚   å®šæ—¶æ‹‰å–    â”‚ å®šæ—¶ä»»åŠ¡      â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- **P0 é˜¶æ®µ**ï¼šå®šæ—¶å…¨é‡/å¢é‡åŒæ­¥ï¼ˆåŸºäº `updated_at` å­—æ®µï¼‰
- **P1 é˜¶æ®µ**ï¼šäº‹ä»¶é©±åŠ¨å¢é‡åŒæ­¥ï¼ˆè®¢é˜… `event-service` çš„é¢†åŸŸäº‹ä»¶ï¼‰

#### 2.4.2 èšåˆæŸ¥è¯¢æ¥å£

`intelli-search-service` å¯¹å¤–æä¾›ç»Ÿä¸€æœç´¢ APIï¼š

```java
// ç»Ÿä¸€èšåˆæœç´¢æ¥å£
POST /api/v1/search/aggregate
{
  "keyword": "ç”¨æˆ·ç®¡ç†",           // æœç´¢å…³é”®è¯
  "types": ["api", "app", "user"], // æœç´¢èŒƒå›´ï¼ˆå¯é€‰ï¼‰
  "filters": {                     // è¿‡æ»¤æ¡ä»¶
    "status": "online",
    "tags": ["æ ¸å¿ƒ", "ç”¨æˆ·"]
  },
  "page": 1,
  "size": 20,
  "highlight": true                // æ˜¯å¦é«˜äº®
}

// å“åº”
{
  "total": 35,
  "items": [
    { "type": "api", "id": "123", "name": "è·å–ç”¨æˆ·ä¿¡æ¯", "highlight": "è·å–<em>ç”¨æˆ·</em>ä¿¡æ¯", ... },
    { "type": "app", "id": "456", "name": "ç”¨æˆ·ä¸­å¿ƒ", ... },
    ...
  ],
  "facets": {                      // åˆ†é¢èšåˆ
    "types": { "api": 20, "app": 10, "user": 5 },
    "tags": { "æ ¸å¿ƒ": 15, "ç”¨æˆ·": 12 }
  }
}
```

#### 2.4.3 æœç´¢æœåŠ¡ä¸å„å¾®æœåŠ¡çš„äº¤äº’

| äº¤äº’æ–¹å‘ | é€šä¿¡æ–¹å¼ | è¯´æ˜ |
|----------|----------|------|
| `search-service` â† ä¸šåŠ¡æœåŠ¡ | **Kafka äº‹ä»¶** | ä¸šåŠ¡æœåŠ¡å‘å¸ƒå˜æ›´äº‹ä»¶ï¼Œsearch-service è®¢é˜…æ¶ˆè´¹ |
| `search-service` â†’ ä¸šåŠ¡æœåŠ¡ | **Dubbo RPC** | å®šæ—¶ä»»åŠ¡æ‹‰å–æ•°æ®ï¼ˆå…œåº•/å…¨é‡åŒæ­¥ï¼‰ |
| å‰ç«¯/å…¶ä»–æœåŠ¡ â†’ `search-service` | **HTTP REST** | è°ƒç”¨æœç´¢ API |

### 2.5 å¤šç§Ÿæˆ·éš”ç¦»

- ES ç´¢å¼•æ•°æ®**å¿…é¡»åŒ…å« `tenantId` å­—æ®µ**
- æ‰€æœ‰æŸ¥è¯¢è‡ªåŠ¨æ³¨å…¥ `tenantId` è¿‡æ»¤æ¡ä»¶
- å¯é€‰ï¼šæŒ‰ç§Ÿæˆ·åˆ†ç´¢å¼•ï¼ˆé€‚ç”¨äºå¤§ç§Ÿæˆ·åœºæ™¯ï¼‰

### 2.6 å¼€å‘è®¡åˆ’

| é˜¶æ®µ | ä»»åŠ¡ | é¢„ä¼°å·¥æœŸ |
|------|------|----------|
| P0 | ES ç¯å¢ƒæ­å»º + `elasticsearch-spring-boot-starter` å°è£… | 2 å¤© |
| P0 | `idx_api` ç´¢å¼•è®¾è®¡ä¸å®šæ—¶åŒæ­¥ï¼ˆapi-platform â†’ ESï¼‰ | 2 å¤© |
| P0 | åŸºç¡€æœç´¢ APIï¼ˆå…³é”®è¯ + åˆ†é¡µï¼‰ | 1 å¤© |
| P1 | `idx_app`ã€`idx_audit` ç´¢å¼•æ¥å…¥ | 2 å¤© |
| P1 | äº‹ä»¶é©±åŠ¨å¢é‡åŒæ­¥ï¼ˆå¯¹æ¥ event-serviceï¼‰ | 2 å¤© |
| P1 | é«˜äº®ã€è”æƒ³ã€åˆ†é¢èšåˆ | 2 å¤© |
| P2 | æœç´¢æ—¥å¿— & çƒ­è¯ç»Ÿè®¡ | 1 å¤© |

---

## 3. äº‹ä»¶ä¸­å¿ƒè®¾è®¡ï¼ˆintelli-event-serviceï¼‰

### 3.1 è®¾è®¡ç›®æ ‡

- å°†å…³é”®ä¸šåŠ¡åŠ¨ä½œ"**äº‹ä»¶åŒ–**"ï¼Œè§£è€¦æœåŠ¡ä¹‹é—´çš„ç›´æ¥ä¾èµ–.
- æä¾›ç»Ÿä¸€çš„äº‹ä»¶å‘å¸ƒ/è®¢é˜…æœºåˆ¶ï¼Œæ”¯æŒäº‹ä»¶æº¯æºä¸è¿½è¸ª.
- ä¸ºèšåˆæœç´¢ã€å®¡è®¡æ—¥å¿—ã€AIGC åˆ†æç­‰æä¾›æ•°æ®é©±åŠ¨åŸºç¡€.

### 3.2 äº‹ä»¶ä¸­å¿ƒæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      intelli-event-service                      â”‚
â”‚                       ï¼ˆäº‹ä»¶ä¸­å¿ƒï¼‰                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    Event Busï¼ˆKafkaï¼‰                     â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚ â”‚
â”‚  â”‚  â”‚ api-events  â”‚  â”‚ app-events  â”‚  â”‚alert-events â”‚ ...   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â–²                                  â”‚
â”‚                              â”‚ å‘å¸ƒäº‹ä»¶                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ api-      â”‚ app-      â”‚governance â”‚ auth-     â”‚             â”‚
â”‚  â”‚ platform  â”‚ center    â”‚ service   â”‚ iam       â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                              â”‚                                  â”‚
â”‚                              â–¼ æ¶ˆè´¹äº‹ä»¶                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ search-   â”‚ log-audit â”‚ aigc-     â”‚ gateway   â”‚             â”‚
â”‚  â”‚ service   â”‚ service   â”‚ service   â”‚ service   â”‚             â”‚
â”‚  â”‚ (ç´¢å¼•æ›´æ–°) â”‚ (å®¡è®¡è®°å½•) â”‚ (æ™ºèƒ½åˆ†æ) â”‚ (è·¯ç”±åˆ·æ–°) â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 é¢†åŸŸäº‹ä»¶å®šä¹‰

| äº‹ä»¶ç±»å‹ | å‘å¸ƒè€… | æ¶ˆè´¹è€… | è¯´æ˜ |
|----------|--------|--------|------|
| `ApiPublished` | api-platform | search, gateway | API å‘å¸ƒä¸Šçº¿ |
| `ApiOfflined` | api-platform | search, gateway | API ä¸‹çº¿ |
| `ApiUpdated` | api-platform | search | API ä¿¡æ¯å˜æ›´ |
| `AppCreated` | app-center | search | åº”ç”¨åˆ›å»º |
| `AppKeyRotated` | app-center | gateway, audit | å¯†é’¥è½®æ¢ |
| `SubscriptionChanged` | app-center | gateway, audit | è®¢é˜…å…³ç³»å˜æ›´ |
| `RouteChanged` | governance | gateway | è·¯ç”±è§„åˆ™å˜æ›´ |
| `AlertTriggered` | governance | aigc, audit | å‘Šè­¦è§¦å‘ |
| `UserCreated` | auth-iam | search | ç”¨æˆ·åˆ›å»º |
| `RoleChanged` | auth-iam | gateway | è§’è‰²æƒé™å˜æ›´ |

### 3.4 äº‹ä»¶æ¨¡å‹ï¼ˆEnvelopeï¼‰

```java
public class DomainEvent {
    private String eventId;        // äº‹ä»¶å”¯ä¸€IDï¼ˆUUIDï¼‰
    private String eventType;      // äº‹ä»¶ç±»å‹ï¼ˆå¦‚ ApiPublishedï¼‰
    private Long tenantId;         // ç§Ÿæˆ·ID
    private Long userId;           // æ“ä½œç”¨æˆ·ID
    private String traceId;        // é“¾è·¯è¿½è¸ªID
    private LocalDateTime occurredAt; // å‘ç”Ÿæ—¶é—´
    private Object payload;        // äº‹ä»¶è½½è·ï¼ˆå…·ä½“ä¸šåŠ¡æ•°æ®ï¼‰
    private Map<String, String> metadata; // æ‰©å±•å…ƒæ•°æ®
}
```

### 3.5 Starter å°è£…

**`event-bus-spring-boot-starter`**ï¼š

- ç»Ÿä¸€äº‹ä»¶å‘å¸ƒæ¥å£ï¼š`EventPublisher.publish(DomainEvent event)`
- ç»Ÿä¸€äº‹ä»¶è®¢é˜…æ³¨è§£ï¼š`@EventListener(type = "ApiPublished")`
- æ”¯æŒæœ¬åœ°äº‹ä»¶ï¼ˆSpring Eventï¼‰ä¸åˆ†å¸ƒå¼äº‹ä»¶ï¼ˆKafkaï¼‰åˆ‡æ¢
- å†…ç½®å¹‚ç­‰å¤„ç†ï¼šåŸºäº `eventId` å»é‡
- äº‹ä»¶æ—¥å¿—ï¼šè‡ªåŠ¨è®°å½•äº‹ä»¶å‘å¸ƒ/æ¶ˆè´¹æ—¥å¿—

### 3.6 å¼€å‘è®¡åˆ’

| é˜¶æ®µ | ä»»åŠ¡ | é¢„ä¼°å·¥æœŸ |
|------|------|----------|
| P0 | äº‹ä»¶æ¨¡å‹è®¾è®¡ + Kafka Topic è§„åˆ’ | 1 å¤© |
| P0 | `event-bus-spring-boot-starter` å°è£… | 2 å¤© |
| P0 | æ ¸å¿ƒäº‹ä»¶æ¥å…¥ï¼ˆApiPublished/Offlined, SubscriptionChangedï¼‰ | 2 å¤© |
| P1 | äº‹ä»¶æ—¥å¿—å­˜å‚¨ä¸æŸ¥è¯¢ | 1 å¤© |
| P1 | å…¨éƒ¨äº‹ä»¶ç±»å‹æ¥å…¥ | 2 å¤© |
| P2 | äº‹ä»¶å›æ”¾ä¸è¿½è¸ªåŠŸèƒ½ | 2 å¤© |

---

## 4. AIGC æ™ºèƒ½å¢å¼ºè®¾è®¡ï¼ˆintelli-aigc-serviceï¼‰

### 4.1 è®¾è®¡ç›®æ ‡

- ä»¥"**å¯æ§æˆæœ¬ + å¯å®¡è®¡**"çš„æ–¹å¼å¼•å…¥ LLM èƒ½åŠ›.
- ä¸ºå¹³å°å„æ¨¡å—æä¾›æ™ºèƒ½åˆ†æã€å†…å®¹ç”Ÿæˆã€è¿ç»´å»ºè®®ç­‰ AI èƒ½åŠ›.

### 4.2 AIGC æœåŠ¡æ¶‰åŠçš„å¹³å°èƒ½åŠ›

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      intelli-aigc-service                       â”‚
â”‚                     ï¼ˆAIGC æ™ºèƒ½å¢å¼ºæœåŠ¡ï¼‰                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                   AI èƒ½åŠ›å±‚                              â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ æ–‡æœ¬ç”Ÿæˆ â”‚ â”‚ å†…å®¹åˆ†æ â”‚ â”‚ æ™ºèƒ½é—®ç­” â”‚ â”‚ ä»£ç ç”Ÿæˆ â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚                                  â”‚
â”‚                              â–¼                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                  å¹³å°èƒ½åŠ›å¯¹æ¥                            â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  ğŸ“„ API æ–‡æ¡£ç”Ÿæˆ          â†’ api-platform-service         â”‚   â”‚
â”‚  â”‚     â€¢ æ ¹æ® API å®šä¹‰è‡ªåŠ¨ç”Ÿæˆæ¥å£æ–‡æ¡£                       â”‚   â”‚
â”‚  â”‚     â€¢ è‡ªåŠ¨è¡¥å……å‚æ•°è¯´æ˜ã€ç¤ºä¾‹å€¼                            â”‚   â”‚
â”‚  â”‚     â€¢ ç”Ÿæˆé”™è¯¯ç è¯´æ˜                                     â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  ğŸ’» SDK ä»£ç ç”Ÿæˆ          â†’ api-platform-service         â”‚   â”‚
â”‚  â”‚     â€¢ æ ¹æ® API å®šä¹‰ç”Ÿæˆå¤šè¯­è¨€ SDK è°ƒç”¨ç¤ºä¾‹                â”‚   â”‚
â”‚  â”‚     â€¢ æ”¯æŒ Javaã€Pythonã€JavaScriptã€Go ç­‰               â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  ğŸš¨ å‘Šè­¦æ™ºèƒ½åˆ†æ          â†’ governance-service           â”‚   â”‚
â”‚  â”‚     â€¢ åˆ†æå‘Šè­¦æ ¹å› ï¼Œç»™å‡ºå¯èƒ½åŸå›                           â”‚   â”‚
â”‚  â”‚     â€¢ æä¾›ä¿®å¤å»ºè®®ä¸æ“ä½œæŒ‡å¼•                              â”‚   â”‚
â”‚  â”‚     â€¢ å¼‚å¸¸æ¨¡å¼è¯†åˆ«ä¸èšç±»                                  â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  ğŸ“Š è°ƒç”¨åˆ†ææŠ¥å‘Š          â†’ governance-service           â”‚   â”‚
â”‚  â”‚     â€¢ ç”Ÿæˆ API è°ƒç”¨è¶‹åŠ¿åˆ†ææŠ¥å‘Š                           â”‚   â”‚
â”‚  â”‚     â€¢ è¯†åˆ«å¼‚å¸¸è°ƒç”¨æ¨¡å¼                                    â”‚   â”‚
â”‚  â”‚     â€¢ å®¹é‡è§„åˆ’å»ºè®®                                        â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  ğŸ” æ™ºèƒ½æœç´¢å¢å¼º          â†’ search-service               â”‚   â”‚
â”‚  â”‚     â€¢ æœç´¢æ„å›¾ç†è§£                                        â”‚   â”‚
â”‚  â”‚     â€¢ ç›¸å…³æ€§æ’åºä¼˜åŒ–                                      â”‚   â”‚
â”‚  â”‚     â€¢ æŸ¥è¯¢æ”¹å†™ä¸æ‰©å±•                                      â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  ğŸ¤– æ™ºèƒ½é—®ç­”åŠ©æ‰‹          â†’ å…¨å¹³å°                        â”‚   â”‚
â”‚  â”‚     â€¢ å¹³å°ä½¿ç”¨å¼•å¯¼                                        â”‚   â”‚
â”‚  â”‚     â€¢ API æ¥å…¥å’¨è¯¢                                        â”‚   â”‚
â”‚  â”‚     â€¢ æ•…éšœæ’æŸ¥è¾…åŠ©                                        â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.3 AIGC èƒ½åŠ›è¯¦ç»†è¯´æ˜

#### 4.3.1 API æ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆ

| è¾“å…¥ | è¾“å‡º | è°ƒç”¨æ–¹ |
|------|------|--------|
| API å®šä¹‰ï¼ˆè·¯å¾„ã€æ–¹æ³•ã€å‚æ•°ã€å“åº”ç»“æ„ï¼‰ | Markdown/HTML æ ¼å¼æ–‡æ¡£ | api-platform-service |

**åœºæ™¯ç¤ºä¾‹**ï¼š
- ç”¨æˆ·åˆ›å»º API åï¼Œè‡ªåŠ¨ç”Ÿæˆæ¥å£æ–‡æ¡£è‰ç¨¿
- æ ¹æ®å‚æ•°ç±»å‹è‡ªåŠ¨è¡¥å……ç¤ºä¾‹å€¼
- ç”Ÿæˆè°ƒç”¨ç¤ºä¾‹ä»£ç 

#### 4.3.2 SDK ä»£ç ç”Ÿæˆ

| è¾“å…¥ | è¾“å‡º | æ”¯æŒè¯­è¨€ |
|------|------|----------|
| API å®šä¹‰ + ç›®æ ‡è¯­è¨€ | å¯ç›´æ¥è¿è¡Œçš„ SDK è°ƒç”¨ä»£ç  | Java, Python, JavaScript, Go, cURL |

#### 4.3.3 å‘Šè­¦æ™ºèƒ½åˆ†æ

| è¾“å…¥ | è¾“å‡º | è°ƒç”¨æ—¶æœº |
|------|------|----------|
| å‘Šè­¦è¯¦æƒ… + è¿‘æœŸè°ƒç”¨æ—¥å¿— + å†å²å‘Šè­¦ | æ ¹å› åˆ†æ + ä¿®å¤å»ºè®® | å‘Šè­¦è§¦å‘æ—¶ |

**åˆ†æç»´åº¦**ï¼š
- é”™è¯¯ç‡å¼‚å¸¸ï¼šåˆ†æé”™è¯¯ç åˆ†å¸ƒã€è¯·æ±‚å‚æ•°ç‰¹å¾
- å“åº”å»¶è¿Ÿï¼šåˆ†ææ…¢è¯·æ±‚ç‰¹å¾ã€ä¸‹æ¸¸ä¾èµ–çŠ¶æ€
- æµé‡çªå¢ï¼šåˆ†æè°ƒç”¨æ¥æºã€æ˜¯å¦ä¸ºæ”»å‡»

#### 4.3.4 æ™ºèƒ½é—®ç­”åŠ©æ‰‹

**åº”ç”¨åœºæ™¯**ï¼š
- "å¦‚ä½•æ¥å…¥æŸä¸ª APIï¼Ÿ"
- "è¿™ä¸ªå‘Šè­¦æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ"
- "ä¸ºä»€ä¹ˆæˆ‘çš„è¯·æ±‚è¿”å› 403ï¼Ÿ"

### 4.4 ä¸å„å¾®æœåŠ¡çš„äº¤äº’

| å¾®æœåŠ¡ | äº¤äº’æ–¹å¼ | æ•°æ®æµ |
|--------|----------|--------|
| `api-platform-service` | Dubbo RPC | è·å– API å®šä¹‰ â†’ è¿”å›æ–‡æ¡£/SDK |
| `governance-service` | Dubbo RPC / äº‹ä»¶ | è·å–å‘Šè­¦è¯¦æƒ… â†’ è¿”å›åˆ†æç»“æœ |
| `search-service` | HTTP | æ¥æ”¶æœç´¢ Query â†’ è¿”å›æ„å›¾åˆ†æ |
| `event-service` | Kafka æ¶ˆè´¹ | è®¢é˜… AlertTriggered äº‹ä»¶ â†’ è§¦å‘åˆ†æ |

### 4.5 Starter å°è£…

**`aigc-client-spring-boot-starter`**ï¼š
```yaml
intellihub:
  aigc:
    provider: openai          # openai / tongyi / volcano / local
    api-key: ${AIGC_API_KEY}
    base-url: https://api.openai.com/v1
    model: gpt-4o-mini
    timeout: 30s
    retry: 3
    rate-limit: 100/min       # é™æµ
    log-desensitize: true     # æ—¥å¿—è„±æ•
```

**æ ¸å¿ƒæ¥å£**ï¼š
```java
public interface AigcClient {
    // æ–‡æœ¬ç”Ÿæˆ
    String generate(String prompt, Map<String, Object> variables);
    
    // æµå¼ç”Ÿæˆ
    Flux<String> generateStream(String prompt, Map<String, Object> variables);
    
    // ç»“æ„åŒ–è¾“å‡º
    <T> T generateStructured(String prompt, Class<T> responseType);
}
```

### 4.6 å¼€å‘è®¡åˆ’

| é˜¶æ®µ | ä»»åŠ¡ | é¢„ä¼°å·¥æœŸ |
|------|------|----------|
| P0 | `aigc-client-spring-boot-starter` å°è£… | 2 å¤© |
| P0 | å¤šä¾›åº”å•†é€‚é…ï¼ˆOpenAIã€é€šä¹‰ï¼‰ | 2 å¤© |
| P1 | å‘Šè­¦æ™ºèƒ½åˆ†æåŠŸèƒ½ | 3 å¤© |
| P1 | API æ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆ | 2 å¤© |
| P2 | SDK ä»£ç ç”Ÿæˆ | 2 å¤© |
| P2 | æ™ºèƒ½é—®ç­”åŠ©æ‰‹ | 3 å¤© |

---

## 5. æ—¥å¿—å®¡è®¡ï¼ˆintelli-log-audit-serviceï¼‰

### 5.1 ç›®æ ‡

- å½¢æˆæ“ä½œç•™ç—•ï¼ˆè°åœ¨ä½•æ—¶å¯¹ä»€ä¹ˆèµ„æºåšäº†ä»€ä¹ˆåŠ¨ä½œï¼‰.
- æ”¯æŒå®¡è®¡æŸ¥è¯¢ä¸æŠ¥è¡¨å¯¼å‡º.

### 5.2 å®¡è®¡äº‹ä»¶æ¨¡å‹

```java
public class AuditLog {
    private Long id;
    private Long userId;           // æ“ä½œç”¨æˆ·
    private Long tenantId;         // ç§Ÿæˆ·
    private String action;         // åŠ¨ä½œï¼ˆCREATE/UPDATE/DELETE/QUERYï¼‰
    private String resourceType;   // èµ„æºç±»å‹ï¼ˆAPI/APP/USER...ï¼‰
    private String resourceId;     // èµ„æºID
    private String beforeData;     // å˜æ›´å‰ï¼ˆJSONï¼‰
    private String afterData;      // å˜æ›´åï¼ˆJSONï¼‰
    private String ip;             // å®¢æˆ·ç«¯IP
    private String userAgent;      // UA
    private String traceId;        // é“¾è·¯ID
    private LocalDateTime createdAt;
}
```

### 5.3 å†™å…¥é“¾è·¯

- **P0**ï¼šåŒæ­¥å†™ DBï¼ˆç®€å•å¯é ï¼‰
- **P1**ï¼šå¼‚æ­¥å†™ Kafka â†’ æ¶ˆè´¹å…¥åº“ï¼ˆé«˜ååï¼‰

### 5.4 Starter å°è£…

**`audit-spring-boot-starter`**ï¼š
- åŸºäº AOP æ‹¦æˆª controller/service
- æ”¯æŒæ³¨è§£ï¼š`@Audit(action="CREATE", resourceType="API")`
- è‡ªåŠ¨é‡‡é›† `UserContextHolder`ã€request headerã€traceId

---

## 6. Starter å°è£…æ€»è¡¨

| Starter | ç±»å‹ | ç›®æ ‡ | ä¼˜å…ˆçº§ |
|---------|------|------|--------|
| `elasticsearch-spring-boot-starter` | æ–°å¢ | ç»Ÿä¸€ ES Client ä¸ DSL/åˆ†é¡µ/å¼‚å¸¸ | P0 |
| `event-bus-spring-boot-starter` | æ–°å¢ | é¢†åŸŸäº‹ä»¶å‘å¸ƒ/è®¢é˜…è§„èŒƒ | P0 |
| `aigc-client-spring-boot-starter` | æ–°å¢ | AI Client æŠ½è±¡ä¸æ²»ç†ï¼ˆé™æµ/è„±æ•ï¼‰ | P1 |
| `audit-spring-boot-starter` | æ–°å¢ | æ“ä½œå®¡è®¡ AOP + å†™å…¥é“¾è·¯ | P1 |
| `redis-cache-spring-boot-starter` | å¢å¼º | ç»Ÿä¸€åºåˆ—åŒ–/Key è§„èŒƒ/å·¥å…·ç±»èƒ½åŠ›å›ºåŒ– | P1 |
| `kafka-spring-boot-starter` | å¢å¼º | ç»Ÿä¸€ Producer/Consumerã€äº‹ä»¶ envelopeã€é‡è¯•/æ­»ä¿¡ | P1 |

---

## 7. æ€»ä½“é‡Œç¨‹ç¢‘ï¼ˆRoadmapï¼‰

| é‡Œç¨‹ç¢‘ | å‘¨æœŸ | ç›®æ ‡ | äº¤ä»˜ç‰© |
|--------|------|------|--------|
| **M0** | 1-2 å¤© | åŸºç¡€è®¾æ–½æ”¶æ•› | ä¾èµ–æ¸…ç†ã€é…ç½®è§„èŒƒåŒ– |
| **M1** | 5-10 å¤© | èšåˆæœç´¢èƒ½åŠ› | ES æ¥å…¥ã€search-serviceã€ç»Ÿä¸€æœç´¢ API |
| **M2** | 3-7 å¤© | äº‹ä»¶ä¸­å¿ƒ | event-serviceã€event-bus-starterã€æ ¸å¿ƒäº‹ä»¶æ¥å…¥ |
| **M3** | 3-7 å¤© | æ—¥å¿—å®¡è®¡ | log-audit-serviceã€audit-starter |
| **M4** | æŒç»­è¿­ä»£ | AIGC æ™ºèƒ½å¢å¼º | aigc-client-starterã€å‘Šè­¦åˆ†æã€æ–‡æ¡£ç”Ÿæˆ |

---

## 8. å»ºè®®çš„æ‰§è¡Œé¡ºåº

1. **P0ï¼šES æ¥å…¥ä¸èšåˆæœç´¢æœåŠ¡ï¼ˆM1ï¼‰**
2. **P0ï¼šäº‹ä»¶ä¸­å¿ƒï¼ˆM2ï¼‰**
3. **P1ï¼šæ—¥å¿—å®¡è®¡æœåŠ¡ï¼ˆM3ï¼‰**
4. **P1/P2ï¼šAIGC æ™ºèƒ½å¢å¼ºï¼ˆM4ï¼‰**

---

## 9. å˜æ›´è®°å½•

- 2025-12-30ï¼šé‡æ„ã€Šåç»­å¼€å‘ä¸ä¼˜åŒ–è®¡åˆ’ã€‹ï¼›è¯¦ç»†è¯´æ˜èšåˆæœç´¢èƒ½åŠ›ï¼ˆæ¶‰åŠå¾®æœåŠ¡ã€æ•°æ®æ¥æºã€åŒæ­¥æ–¹å¼ï¼‰ï¼›è¡¥å……äº‹ä»¶ä¸­å¿ƒè®¾è®¡ï¼›å®Œå–„ AIGC æœåŠ¡ä¸å¹³å°èƒ½åŠ›çš„å¯¹æ¥è¯´æ˜.
