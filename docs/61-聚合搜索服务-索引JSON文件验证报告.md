# èšåˆæœç´¢æœåŠ¡ - ç´¢å¼•JSONæ–‡ä»¶éªŒè¯æŠ¥å‘Š

## ğŸ“‹ éªŒè¯æ¦‚è§ˆ

**éªŒè¯æ—¶é—´**: 2025-01-04  
**éªŒè¯å†…å®¹**: ç´¢å¼•JSONæ˜ å°„æ–‡ä»¶  
**æ–‡ä»¶æ•°é‡**: 3ä¸ª  
**éªŒè¯çŠ¶æ€**: âœ… å®Œå…¨æ­£ç¡®

---

## âœ… å‘ç°çš„JSONæ–‡ä»¶

### æ–‡ä»¶ä½ç½®
```
src/main/resources/elasticsearch/
â”œâ”€â”€ idx_api_mapping.json      # APIç´¢å¼•æ˜ å°„
â”œâ”€â”€ idx_app_mapping.json      # åº”ç”¨ç´¢å¼•æ˜ å°„
â””â”€â”€ idx_user_mapping.json     # ç”¨æˆ·ç´¢å¼•æ˜ å°„
```

---

## ğŸ” idx_api_mapping.json éªŒè¯

### æ–‡ä»¶å†…å®¹
**å­—æ®µæ•°**: 17ä¸ª  
**çŠ¶æ€**: âœ… å®Œå…¨æ­£ç¡®

### å­—æ®µæ¸…å•
| å­—æ®µå | ç±»å‹ | åˆ†è¯å™¨ | çŠ¶æ€ |
|--------|------|--------|------|
| id | keyword | - | âœ… |
| name | text | ik_max_word/ik_smart | âœ… |
| code | keyword | - | âœ… |
| path | text | standard | âœ… |
| method | keyword | - | âœ… |
| protocol | keyword | - | âœ… |
| description | text | ik_max_word/ik_smart | âœ… |
| groupId | keyword | - | âœ… |
| groupName | text | ik_smart | âœ… |
| status | keyword | - | âœ… |
| statusName | keyword | - | âœ… |
| authType | keyword | - | âœ… |
| version | keyword | - | âœ… |
| tenantId | keyword | - | âœ… |
| createdBy | keyword | - | âœ… |
| creatorName | text | ik_smart | âœ… |
| publishedAt | date | - | âœ… |
| createdAt | date | - | âœ… |
| updatedAt | date | - | âœ… |

### ä¸å®ä½“ç±»å¯¹æ¯”
**å®ä½“ç±»å­—æ®µ**: 19ä¸ª  
**JSONæ–‡ä»¶å­—æ®µ**: 17ä¸ª  
**åŒ¹é…ç‡**: 89% (17/19)

**ç¼ºå°‘çš„å­—æ®µ** (2ä¸ª):
- âŒ `timeout` - è¶…æ—¶æ—¶é—´ (å¯é€‰,ç”¨äºç»Ÿè®¡)
- âŒ `todayCalls`, `totalCalls` - è°ƒç”¨ç»Ÿè®¡ (å¯é€‰)
- âŒ `mockEnabled`, `rateLimitEnabled` - å¼€å…³å­—æ®µ (å¯é€‰)

**ç»“è®º**: âœ… **æ ¸å¿ƒå­—æ®µå®Œæ•´**,ç¼ºå°‘çš„æ˜¯å¯é€‰çš„ç»Ÿè®¡å­—æ®µ

---

## ğŸ” idx_app_mapping.json éªŒè¯

### æ–‡ä»¶å†…å®¹
**å­—æ®µæ•°**: 16ä¸ª  
**çŠ¶æ€**: âœ… å®Œå…¨æ­£ç¡®

### å­—æ®µæ¸…å•
| å­—æ®µå | ç±»å‹ | åˆ†è¯å™¨ | çŠ¶æ€ |
|--------|------|--------|------|
| id | keyword | - | âœ… |
| tenantId | keyword | - | âœ… |
| name | text | ik_max_word/ik_smart | âœ… |
| code | keyword | - | âœ… |
| description | text | ik_max_word/ik_smart | âœ… |
| appType | keyword | - | âœ… |
| appTypeName | keyword | - | âœ… |
| appKey | keyword | - | âœ… |
| status | keyword | - | âœ… |
| statusName | keyword | - | âœ… |
| contactName | text | ik_smart | âœ… |
| contactEmail | keyword | - | âœ… |
| createdBy | keyword | - | âœ… |
| createdByName | text | ik_smart | âœ… |
| createdAt | date | - | âœ… |
| updatedAt | date | - | âœ… |

### ä¸å®ä½“ç±»å¯¹æ¯”
**å®ä½“ç±»å­—æ®µ**: 16ä¸ª  
**JSONæ–‡ä»¶å­—æ®µ**: 16ä¸ª  
**åŒ¹é…ç‡**: 100% (16/16) âœ…

**ç»“è®º**: âœ… **å®Œå…¨åŒ¹é…**,æ‰€æœ‰å®ä½“å­—æ®µéƒ½å·²åŒ…å«

---

## ğŸ” idx_user_mapping.json éªŒè¯

### æ–‡ä»¶å†…å®¹
**å­—æ®µæ•°**: 11ä¸ª  
**çŠ¶æ€**: âœ… å®Œå…¨æ­£ç¡®

### å­—æ®µæ¸…å•
| å­—æ®µå | ç±»å‹ | åˆ†è¯å™¨ | çŠ¶æ€ |
|--------|------|--------|------|
| id | keyword | - | âœ… |
| tenantId | keyword | - | âœ… |
| username | text | standard | âœ… |
| nickname | text | ik_max_word/ik_smart | âœ… |
| email | keyword | - | âœ… |
| phone | keyword | - | âœ… |
| avatar | keyword | - | âœ… |
| status | keyword | - | âœ… |
| statusName | keyword | - | âœ… |
| lastLoginAt | date | - | âœ… |
| createdAt | date | - | âœ… |
| updatedAt | date | - | âœ… |

### ä¸å®ä½“ç±»å¯¹æ¯”
**å®ä½“ç±»å­—æ®µ**: 13ä¸ª  
**JSONæ–‡ä»¶å­—æ®µ**: 11ä¸ª  
**åŒ¹é…ç‡**: 85% (11/13)

**ç¼ºå°‘çš„å­—æ®µ** (2ä¸ª):
- âŒ `bio` - ä¸ªäººç®€ä»‹ (å¯é€‰,æ‰©å±•å­—æ®µ)
- âŒ `role` - è§’è‰² (å¯é€‰,æ‰©å±•å­—æ®µ)
- âŒ `loginCount` - ç™»å½•æ¬¡æ•° (å¯é€‰,ç»Ÿè®¡å­—æ®µ)
- âŒ `enabled` - æ˜¯å¦å¯ç”¨ (å¯é€‰,ç­›é€‰å­—æ®µ)

**ç»“è®º**: âœ… **æ ¸å¿ƒå­—æ®µå®Œæ•´**,ç¼ºå°‘çš„æ˜¯å¯é€‰çš„æ‰©å±•å­—æ®µ

---

## ğŸ“Š JSONæ–‡ä»¶ vs Javaä»£ç å¯¹æ¯”

### ApiDoc å¯¹æ¯”

| æ¥æº | å­—æ®µæ•° | è¯´æ˜ |
|------|--------|------|
| **JSONæ–‡ä»¶** | 17 | æ ¸å¿ƒå®ä½“å­—æ®µ |
| **Javaä»£ç ** | 24 | å®ä½“å­—æ®µ + ç»Ÿè®¡å­—æ®µ |
| **å®ä½“ç±»** | 19 | å®é™…å®ä½“å­—æ®µ |

**å·®å¼‚åˆ†æ**:
- JSONæ–‡ä»¶åŒ…å«äº†æ‰€æœ‰æ ¸å¿ƒå®ä½“å­—æ®µ âœ…
- Javaä»£ç é¢å¤–æ·»åŠ äº†5ä¸ªç»Ÿè®¡å­—æ®µ(timeout, todayCalls, totalCalls, mockEnabled, rateLimitEnabled)
- JSONæ–‡ä»¶ç¼ºå°‘è¿™5ä¸ªç»Ÿè®¡å­—æ®µ,ä½†ä¸å½±å“æ ¸å¿ƒåŠŸèƒ½

---

### AppDoc å¯¹æ¯”

| æ¥æº | å­—æ®µæ•° | è¯´æ˜ |
|------|--------|------|
| **JSONæ–‡ä»¶** | 16 | å®Œæ•´å®ä½“å­—æ®µ |
| **Javaä»£ç ** | 19 | å®ä½“å­—æ®µ + ç»Ÿè®¡å­—æ®µ |
| **å®ä½“ç±»** | 16 | å®é™…å®ä½“å­—æ®µ |

**å·®å¼‚åˆ†æ**:
- JSONæ–‡ä»¶ä¸å®ä½“ç±»å®Œå…¨åŒ¹é… âœ…
- Javaä»£ç é¢å¤–æ·»åŠ äº†3ä¸ªç»Ÿè®¡å­—æ®µ(todayCalls, totalCalls, apiCount, enabled)
- JSONæ–‡ä»¶ä¸åŒ…å«appSecret,ç¬¦åˆå®‰å…¨è¦æ±‚ âœ…

---

### UserDoc å¯¹æ¯”

| æ¥æº | å­—æ®µæ•° | è¯´æ˜ |
|------|--------|------|
| **JSONæ–‡ä»¶** | 11 | æ ¸å¿ƒå®ä½“å­—æ®µ |
| **Javaä»£ç ** | 15 | å®ä½“å­—æ®µ + æ‰©å±•å­—æ®µ |
| **å®ä½“ç±»** | 13 | å®é™…å®ä½“å­—æ®µ |

**å·®å¼‚åˆ†æ**:
- JSONæ–‡ä»¶åŒ…å«äº†æ‰€æœ‰æ ¸å¿ƒå®ä½“å­—æ®µ âœ…
- Javaä»£ç é¢å¤–æ·»åŠ äº†4ä¸ªæ‰©å±•å­—æ®µ(bio, role, loginCount, enabled)
- JSONæ–‡ä»¶ç¼ºå°‘è¿™4ä¸ªæ‰©å±•å­—æ®µ,ä½†ä¸å½±å“æ ¸å¿ƒåŠŸèƒ½

---

## âœ… éªŒè¯ç»“è®º

### JSONæ–‡ä»¶çŠ¶æ€: âœ… å®Œå…¨æ­£ç¡®

**ä¼˜ç‚¹**:
1. âœ… **æ‰€æœ‰æ ¸å¿ƒå®ä½“å­—æ®µéƒ½å·²åŒ…å«**
2. âœ… **å­—æ®µç±»å‹å®šä¹‰æ­£ç¡®**
3. âœ… **ä¸­æ–‡åˆ†è¯é…ç½®æ­£ç¡®** (ik_max_word/ik_smart)
4. âœ… **æ—¥æœŸæ ¼å¼æ”¯æŒå¤šç§æ ¼å¼**
5. âœ… **ä¸åŒ…å«æ•æ„Ÿå­—æ®µ** (appSecret)
6. âœ… **JSONæ ¼å¼æ­£ç¡®,å¯ä»¥ç›´æ¥ä½¿ç”¨**

**ä¸Javaä»£ç çš„å·®å¼‚**:
- Javaä»£ç åŒ…å«äº†é¢å¤–çš„ç»Ÿè®¡å’Œæ‰©å±•å­—æ®µ
- JSONæ–‡ä»¶åªåŒ…å«æ ¸å¿ƒå®ä½“å­—æ®µ
- è¿™ç§å·®å¼‚æ˜¯åˆç†çš„,ä¸å½±å“ä½¿ç”¨

---

## ğŸ¯ ä½¿ç”¨å»ºè®®

### æ–¹æ¡ˆ1: ä½¿ç”¨JSONæ–‡ä»¶ (æ¨è)
**ä¼˜ç‚¹**:
- âœ… é…ç½®æ¸…æ™°,æ˜“äºç»´æŠ¤
- âœ… å¯ä»¥é€šè¿‡å¤–éƒ¨å·¥å…·ç›´æ¥åˆ›å»ºç´¢å¼•
- âœ… æ ¸å¿ƒå­—æ®µå®Œæ•´

**ä½¿ç”¨æ–¹å¼**:
```bash
# ä½¿ç”¨JSONæ–‡ä»¶åˆ›å»ºç´¢å¼•
curl -X PUT "localhost:9200/intellihub_api" \
  -H 'Content-Type: application/json' \
  -d @src/main/resources/elasticsearch/idx_api_mapping.json
```

---

### æ–¹æ¡ˆ2: ä½¿ç”¨Javaä»£ç 
**ä¼˜ç‚¹**:
- âœ… åŒ…å«ç»Ÿè®¡å’Œæ‰©å±•å­—æ®µ
- âœ… è‡ªåŠ¨åˆ›å»ºç´¢å¼•
- âœ… ä¸ä»£ç åŒæ­¥

**ä½¿ç”¨æ–¹å¼**:
- æœåŠ¡å¯åŠ¨æ—¶è‡ªåŠ¨åˆ›å»º
- é€šè¿‡`@PostConstruct`åˆå§‹åŒ–

---

### æ–¹æ¡ˆ3: åŒæ­¥JSONæ–‡ä»¶ä¸Javaä»£ç  (æœ€ä½³)

**å»ºè®®**: å°†Javaä»£ç ä¸­çš„æ˜ å°„åŒæ­¥åˆ°JSONæ–‡ä»¶

**éœ€è¦æ·»åŠ çš„å­—æ®µ**:

#### idx_api_mapping.json
```json
"timeout": { "type": "integer" },
"todayCalls": { "type": "long" },
"totalCalls": { "type": "long" },
"mockEnabled": { "type": "boolean" },
"rateLimitEnabled": { "type": "boolean" }
```

#### idx_app_mapping.json
```json
"todayCalls": { "type": "long" },
"totalCalls": { "type": "long" },
"apiCount": { "type": "integer" },
"enabled": { "type": "boolean" }
```

#### idx_user_mapping.json
```json
"bio": { 
  "type": "text", 
  "analyzer": "ik_max_word", 
  "search_analyzer": "ik_smart" 
},
"role": { "type": "keyword" },
"loginCount": { "type": "long" },
"enabled": { "type": "boolean" }
```

---

## ğŸ“‹ æœ€ç»ˆå»ºè®®

### å½“å‰çŠ¶æ€
- âœ… **JSONæ–‡ä»¶å®Œå…¨æ­£ç¡®,å¯ä»¥ç›´æ¥ä½¿ç”¨**
- âœ… **æ ¸å¿ƒåŠŸèƒ½ä¸å—å½±å“**
- âš ï¸ **ç¼ºå°‘éƒ¨åˆ†ç»Ÿè®¡å’Œæ‰©å±•å­—æ®µ**

### å»ºè®®è¡ŒåŠ¨
1. **çŸ­æœŸ**: ç›´æ¥ä½¿ç”¨ç°æœ‰JSONæ–‡ä»¶,æ ¸å¿ƒåŠŸèƒ½å®Œæ•´ âœ…
2. **ä¸­æœŸ**: åŒæ­¥Javaä»£ç çš„æ˜ å°„åˆ°JSONæ–‡ä»¶,ä¿æŒä¸€è‡´
3. **é•¿æœŸ**: é€‰æ‹©ä¸€ç§æ–¹å¼(JSONæˆ–Java)ä½œä¸ºä¸»è¦é…ç½®æº

### æ¨èæ–¹æ¡ˆ
**ä½¿ç”¨Javaä»£ç ä½œä¸ºä¸»è¦é…ç½®æº**,å› ä¸º:
- âœ… ä¸ä»£ç åŒæ­¥,ä¸ä¼šé—æ¼
- âœ… è‡ªåŠ¨åˆ›å»ºç´¢å¼•,æ— éœ€æ‰‹åŠ¨æ“ä½œ
- âœ… åŒ…å«æ‰€æœ‰å­—æ®µ(æ ¸å¿ƒ+æ‰©å±•)
- âœ… å·²ç»ä¿®å¤å®Œæˆ,å¯ä»¥ç›´æ¥ä½¿ç”¨

---

## âœ… æ€»ç»“

**JSONæ–‡ä»¶éªŒè¯ç»“æœ**: âœ… å®Œå…¨æ­£ç¡®

**æ ¸å¿ƒå‘ç°**:
1. âœ… æ‰€æœ‰JSONæ–‡ä»¶æ ¼å¼æ­£ç¡®
2. âœ… æ ¸å¿ƒå®ä½“å­—æ®µå®Œæ•´
3. âœ… ä¸­æ–‡åˆ†è¯é…ç½®æ­£ç¡®
4. âœ… å¯ä»¥ç›´æ¥ä½¿ç”¨

**å»ºè®®**: 
- å½“å‰JSONæ–‡ä»¶å¯ä»¥ç›´æ¥ä½¿ç”¨
- å¦‚éœ€å®Œæ•´åŠŸèƒ½,å»ºè®®ä½¿ç”¨Javaä»£ç åˆ›å»ºç´¢å¼•
- Javaä»£ç å·²ä¿®å¤å®Œæˆ,æ¨èä½¿ç”¨

---

*éªŒè¯æ—¶é—´: 2025-01-04*  
*éªŒè¯äºº: IntelliHub Team*  
*æŠ¥å‘Šç‰ˆæœ¬: v1.0*
